local _G = require "_G"
local assert = _G.assert

local luaidl = require "luaidl"
local parse = luaidl.parse

local idlspec = [[
#include "access_control.idl"
#include "offer_registry.idl"
]]

local Compiler = require "oil.corba.idl.Compiler"
local options = Compiler().defaults
options.incpath = {
  os.getenv("OPENBUS_IDLPATH") or "idl/core",
  os.getenv("OPENBUS_SCSIDL") or "idl/scs",
}
return { assert(parse(idlspec, options)) }
